{"ast":null,"code":"var _jsxFileName = \"/home/alisson/Desktop/Projetos/sd-019-a-project-trivia-react-redux/src/pages/Login.jsx\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux'; // import logo from '../trivia.png';\n\nimport '../App.css';\nimport GameSettings from '../components/GameSettings';\nimport { gravatarAction, fetchToken, nameAction } from '../Redux/Actions';\nimport profilePictureAPI from '../Helpers/profilePictureAPI';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.getGravatarImg = async () => {\n      const {\n        email\n      } = this.state;\n      const image = await profilePictureAPI(email);\n      this.setState({\n        gravatar: image\n      });\n    };\n\n    this.validateButton = () => {\n      const {\n        email,\n        name\n      } = this.state;\n      const minPasswordLength = 0; // Regex encontrado no link: https://www.w3resource.com/javascript/form/email-validation.php\n\n      const emailFormatRegex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n\n      if (name.length > minPasswordLength && email.match(emailFormatRegex)) {\n        this.setState({\n          isButtonDisabled: false\n        });\n      } else {\n        this.setState({\n          isButtonDisabled: true\n        });\n      }\n    };\n\n    this.settingsPage = () => {\n      const {\n        settings\n      } = this.state;\n      this.setState({\n        settings: !settings\n      });\n    };\n\n    this.onInputChange = _ref => {\n      let {\n        target\n      } = _ref;\n      this.setState({\n        [target.name]: target.value\n      }, this.validateButton);\n    };\n\n    this.handleClick = async () => {\n      const {\n        getFetchToken,\n        history\n      } = this.props;\n      await getFetchToken(); // await getFetchGameInfo(token);\n\n      history.push('/game');\n      this.getGravatarImg();\n    };\n\n    this.state = {\n      email: '',\n      name: '',\n      isButtonDisabled: true,\n      settings: false,\n      gravatar: ''\n    };\n  }\n\n  render() {\n    const {\n      isButtonDisabled,\n      gravatar,\n      name,\n      settings,\n      email\n    } = this.state;\n    const {\n      gravatarImg,\n      nameProp\n    } = this.props;\n    gravatarImg(gravatar);\n    nameProp(name);\n\n    if (settings) {\n      return /*#__PURE__*/React.createElement(GameSettings, {\n        loginPage: this.settingsPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"nameInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"name\",\n      \"data-testid\": \"input-player-name\",\n      id: \"nameInput\",\n      value: name,\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"gravatarEmailInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      id: \"gravatarEmailInput\",\n      \"data-testid\": \"input-gravatar-email\",\n      onChange: this.onInputChange,\n      value: email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      disabled: isButtonDisabled,\n      type: \"button\",\n      \"data-testid\": \"btn-play\",\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, \"Play\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"btn-settings\",\n      onClick: this.settingsPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, \"Settings\"));\n  }\n\n}\n\nLogin.propTypes = {\n  gravatarImg: PropTypes.func.isRequired\n};\n\nconst mapDispatchToProps = dispatch => ({\n  getFetchToken: () => dispatch(fetchToken()),\n  gravatarImg: gravatar => dispatch(gravatarAction(gravatar)),\n  nameProp: name => dispatch(nameAction(name))\n});\n\nconst mapStateToProps = state => ({\n  token: state.token\n});\n\nLogin.propTypes = {\n  history: PropTypes.objectOf(PropTypes.any),\n  getFetchToken: PropTypes.func\n}.isRequired;\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/alisson/Desktop/Projetos/sd-019-a-project-trivia-react-redux/src/pages/Login.jsx"],"names":["PropTypes","React","connect","GameSettings","gravatarAction","fetchToken","nameAction","profilePictureAPI","Login","Component","constructor","getGravatarImg","email","state","image","setState","gravatar","validateButton","name","minPasswordLength","emailFormatRegex","length","match","isButtonDisabled","settingsPage","settings","onInputChange","target","value","handleClick","getFetchToken","history","props","push","render","gravatarImg","nameProp","propTypes","func","isRequired","mapDispatchToProps","dispatch","mapStateToProps","token","objectOf","any"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\n// import logo from '../trivia.png';\nimport '../App.css';\nimport GameSettings from '../components/GameSettings';\nimport { gravatarAction, fetchToken, nameAction } from '../Redux/Actions';\nimport profilePictureAPI from '../Helpers/profilePictureAPI';\n\nclass Login extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      email: '',\n      name: '',\n      isButtonDisabled: true,\n      settings: false,\n      gravatar: '',\n    };\n  }\n\n  getGravatarImg = async () => {\n    const { email } = this.state;\n    const image = await profilePictureAPI(email);\n\n    this.setState({\n      gravatar: image,\n    });\n  };\n\n  validateButton = () => {\n    const { email, name } = this.state;\n    const minPasswordLength = 0;\n    // Regex encontrado no link: https://www.w3resource.com/javascript/form/email-validation.php\n    const emailFormatRegex = /^\\w+([.-]?\\w+)*@\\w+([.-]?\\w+)*(\\.\\w{2,3})+$/;\n    if (name.length > minPasswordLength && email.match(emailFormatRegex)) {\n      this.setState({\n        isButtonDisabled: false,\n      });\n    } else {\n      this.setState({\n        isButtonDisabled: true,\n      });\n    }\n  }\n\n  settingsPage = () => {\n    const { settings } = this.state;\n    this.setState({\n      settings: !settings,\n    });\n  }\n\nonInputChange = ({ target }) => {\n  this.setState({ [target.name]: target.value }, this.validateButton);\n}\n\nhandleClick = async () => {\n  const { getFetchToken, history } = this.props;\n  await getFetchToken();\n  // await getFetchGameInfo(token);\n  history.push('/game');\n  this.getGravatarImg();\n}\n\nrender() {\n  const { isButtonDisabled, gravatar, name, settings, email } = this.state;\n  const { gravatarImg, nameProp } = this.props;\n  gravatarImg(gravatar);\n  nameProp(name);\n  if (settings) {\n    return (\n      <GameSettings loginPage={ this.settingsPage } />\n    );\n  }\n  return (\n    <>\n      {/* <header className=\"App-header\">\n          <img src={ logo } className=\"App-logo\" alt=\"logo\" />\n        </header> */}\n\n      <label htmlFor=\"nameInput\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          data-testid=\"input-player-name\"\n          id=\"nameInput\"\n          value={ name }\n          onChange={ this.onInputChange }\n        />\n      </label>\n\n      <label htmlFor=\"gravatarEmailInput\">\n        <input\n          type=\"email\"\n          name=\"email\"\n          id=\"gravatarEmailInput\"\n          data-testid=\"input-gravatar-email\"\n          onChange={ this.onInputChange }\n          value={ email }\n        />\n      </label>\n      <button\n        disabled={ isButtonDisabled }\n        type=\"button\"\n        data-testid=\"btn-play\"\n        onClick={ this.handleClick }\n      >\n        Play\n      </button>\n      <button\n        type=\"button\"\n        data-testid=\"btn-settings\"\n        onClick={ this.settingsPage }\n      >\n        Settings\n      </button>\n    </>\n  );\n}\n}\n\nLogin.propTypes = {\n  gravatarImg: PropTypes.func.isRequired,\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  getFetchToken: () => dispatch(fetchToken()),\n  gravatarImg: (gravatar) => dispatch(gravatarAction(gravatar)),\n  nameProp: (name) => dispatch(nameAction(name)),\n});\n\nconst mapStateToProps = (state) => ({\n  token: state.token,\n});\n\nLogin.propTypes = {\n  history: PropTypes.objectOf(PropTypes.any),\n  getFetchToken: PropTypes.func,\n}.isRequired;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"]},"metadata":{},"sourceType":"module"}