{"ast":null,"code":"var _jsxFileName = \"/home/alisson/Desktop/Projetos/TriviaVercel/src/components/Question.js\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { addQtdCorrectAnswers, addScore, answerQuestion, nextQuestion } from '../Redux/Actions';\nimport '../styles/Question.css';\nimport styles from '../styles/Question.module.css';\nimport Loading from './Loading';\nimport NextButton from './NextButton';\n\nconst he = require('he');\n\nclass Question extends Component {\n  constructor() {\n    super();\n\n    this.setNextQuestion = () => {\n      const {\n        currentQuestion,\n        btnNextQuestion,\n        results\n      } = this.props;\n\n      if (currentQuestion < results.length - 1) {\n        btnNextQuestion(currentQuestion + 1);\n        this.setState({\n          color: false,\n          win: false,\n          loose: false,\n          correctAnswer: results[currentQuestion + 1].correct_answer,\n          questionAnswered: false,\n          answers: [...results[currentQuestion + 1].incorrect_answers, results[currentQuestion + 1].correct_answer]\n        }, () => this.handleQuestions());\n      }\n    };\n\n    this.handleQuestions = () => {\n      const {\n        answers\n      } = this.state;\n      const random = this.shuffleAnswers(answers);\n      this.setState({\n        answers: random,\n        loading: false\n      });\n    };\n\n    this.shuffleAnswers = array => {\n      let currentIndex = array.length;\n      let randomIndex; // While there remain elements to shuffle...\n\n      while (currentIndex !== 0) {\n        // Pick a remaining element...\n        randomIndex = Math.floor(Math.random() * currentIndex);\n        currentIndex -= 1; // And swap it with the current element.\n\n        [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];\n      }\n\n      return array;\n    };\n\n    this.isCorrect = answer => {\n      const {\n        correctAnswer,\n        answers\n      } = this.state;\n      const wrongAnswers = answers.filter(a => a !== correctAnswer);\n      if (correctAnswer === answer) return 'correct-answer';\n      return `wrong-answer-${wrongAnswers.indexOf(answer)}`;\n    };\n\n    this.scoreCalculation = (answer, timer, difficulty) => {\n      const {\n        correctAnswer\n      } = this.state;\n      const {\n        score,\n        newScore,\n        countCorrectAnswers,\n        assertions\n      } = this.props;\n      let difficultyValue = 0;\n      const UM = 1;\n      const DOIS = 2;\n      const TRES = 3;\n      const DEZ = 10;\n\n      if (difficulty === 'hard') {\n        difficultyValue = TRES;\n      }\n\n      if (difficulty === 'medium') {\n        difficultyValue = DOIS;\n      }\n\n      if (difficulty === 'easy') {\n        difficultyValue = UM;\n      }\n\n      if (correctAnswer === answer) {\n        newScore(score + DEZ + difficultyValue * timer);\n        countCorrectAnswers(assertions + 1);\n        this.setState({\n          win: true\n        });\n      } else {\n        this.setState({\n          loose: true\n        });\n      }\n    };\n\n    this.errou = () => true;\n\n    this.handleClick = selected => {\n      const {\n        timer,\n        results,\n        currentQuestion,\n        setAnswer\n      } = this.props;\n      const level = results[currentQuestion].difficulty;\n      this.setState({\n        color: true\n      });\n      this.scoreCalculation(selected, timer, level);\n      this.setState({\n        questionAnswered: true\n      });\n      setAnswer();\n    };\n\n    this.isActive = answer => {\n      const {\n        color,\n        correctAnswer\n      } = this.state;\n\n      if (color === true) {\n        if (correctAnswer === answer) return 'correct-answer';\n        return 'wrong-answer';\n      }\n    };\n\n    this.verifyTimer = () => {\n      const {\n        questionAnswered\n      } = this.state;\n      const {\n        timer\n      } = this.props;\n      /* if (timer === 0) {\n        setAnswer();\n      } */\n\n      if (timer === 0 || questionAnswered === true) {\n        return true;\n      }\n    };\n\n    this.state = {\n      correctAnswer: '',\n      answers: [],\n      loading: true,\n      color: false,\n      questionAnswered: false,\n      win: false,\n      loose: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      results,\n      currentQuestion\n    } = this.props;\n    this.setState({\n      correctAnswer: results[currentQuestion].correct_answer,\n      answers: [...results[currentQuestion].incorrect_answers, results[currentQuestion].correct_answer]\n    }, () => this.handleQuestions());\n  }\n\n  render() {\n    const {\n      results,\n      currentQuestion,\n      timer\n    } = this.props;\n    const {\n      loading,\n      answers,\n      questionAnswered,\n      win,\n      loose\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, loading === true ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: `${styles['question-container']} \n              col-10 m-auto mb-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }, win === true ? /*#__PURE__*/React.createElement(\"audio\", {\n      src: \"https://www.myinstants.com/media/sounds/barabannn.mp3\",\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 33\n      }\n    }) : '', loose === true ? /*#__PURE__*/React.createElement(\"audio\", {\n      src: \"https://www.myinstants.com/media/sounds/vinheta-faustao-errou-rede-globo.mp3\",\n      autoPlay: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 35\n      }\n    }) : '' // https://www.myinstants.com/media/sounds/vinheta-faustao-errou-rede-globo.mp3\n    // https://www.myinstants.com/media/sounds/tmp61fq4oi1.mp3\n    , /*#__PURE__*/React.createElement(\"span\", {\n      \"data-testid\": \"question-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, results[currentQuestion].category), /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"question-text\",\n      className: \"m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, he.decode(results[currentQuestion].question)), /*#__PURE__*/React.createElement(\"div\", {\n      className: `${styles['next-question-container']} col-lg-6 m-auto`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, questionAnswered && (currentQuestion < results.length - 1 ? /*#__PURE__*/React.createElement(NextButton, {\n      nextQuestion: this.setNextQuestion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 23\n      }\n    }) : /*#__PURE__*/React.createElement(Link, {\n      to: \"/feedback\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(NextButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 44\n      }\n    }))), timer === 0 && (currentQuestion < results.length - 1 ? /*#__PURE__*/React.createElement(NextButton, {\n      nextQuestion: this.setNextQuestion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 23\n      }\n    }) : /*#__PURE__*/React.createElement(Link, {\n      to: \"/feedback\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(NextButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 44\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      \"data-testid\": \"answer-options\",\n      className: `${styles['answers-container']} \n                col-11 m-auto row mb-3`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, answers.map((answer, index) => /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      key: index,\n      \"data-testid\": this.isCorrect(answer),\n      className: `${styles['answer-text']} ${this.isActive(answer)} col-lg-5`,\n      onClick: () => this.handleClick(answer),\n      disabled: this.verifyTimer(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, he.decode(answer))))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  results: state.game.results,\n  currentQuestion: state.game.currentQuestion,\n  timer: state.game.timer,\n  score: state.player.score,\n  assertions: state.player.assertions\n});\n\nconst mapDispatchToProps = dispatch => ({\n  newScore: score => dispatch(addScore(score)),\n  btnNextQuestion: question => dispatch(nextQuestion(question)),\n  countCorrectAnswers: answer => dispatch(addQtdCorrectAnswers(answer)),\n  setAnswer: () => dispatch(answerQuestion())\n});\n\nQuestion.propTypes = {\n  history: PropTypes.objectOf(PropTypes.any),\n  results: PropTypes.arrayOf(PropTypes.any),\n  currentQuestion: PropTypes.number\n}.isRequired;\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);","map":{"version":3,"sources":["/home/alisson/Desktop/Projetos/TriviaVercel/src/components/Question.js"],"names":["PropTypes","React","Component","connect","Link","addQtdCorrectAnswers","addScore","answerQuestion","nextQuestion","styles","Loading","NextButton","he","require","Question","constructor","setNextQuestion","currentQuestion","btnNextQuestion","results","props","length","setState","color","win","loose","correctAnswer","correct_answer","questionAnswered","answers","incorrect_answers","handleQuestions","state","random","shuffleAnswers","loading","array","currentIndex","randomIndex","Math","floor","isCorrect","answer","wrongAnswers","filter","a","indexOf","scoreCalculation","timer","difficulty","score","newScore","countCorrectAnswers","assertions","difficultyValue","UM","DOIS","TRES","DEZ","errou","handleClick","selected","setAnswer","level","isActive","verifyTimer","componentDidMount","render","category","decode","question","map","index","mapStateToProps","game","player","mapDispatchToProps","dispatch","propTypes","history","objectOf","any","arrayOf","number","isRequired"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {\n  addQtdCorrectAnswers, addScore,\n  answerQuestion, nextQuestion,\n} from '../Redux/Actions';\nimport '../styles/Question.css';\nimport styles from '../styles/Question.module.css';\nimport Loading from './Loading';\nimport NextButton from './NextButton';\n\nconst he = require('he');\n\nclass Question extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      correctAnswer: '',\n      answers: [],\n      loading: true,\n      color: false,\n      questionAnswered: false,\n      win: false,\n      loose: false,\n    };\n  }\n\n  componentDidMount() {\n    const { results, currentQuestion } = this.props;\n    this.setState({\n      correctAnswer: results[currentQuestion].correct_answer,\n      answers: [...results[currentQuestion].incorrect_answers,\n        results[currentQuestion].correct_answer],\n    }, () => this.handleQuestions());\n  }\n\n  setNextQuestion = () => {\n    const { currentQuestion, btnNextQuestion, results } = this.props;\n    if (currentQuestion < results.length - 1) {\n      btnNextQuestion(currentQuestion + 1);\n      this.setState({\n        color: false,\n        win: false,\n        loose: false,\n        correctAnswer: results[currentQuestion + 1].correct_answer,\n        questionAnswered: false,\n        answers: [...results[currentQuestion + 1].incorrect_answers,\n          results[currentQuestion + 1].correct_answer],\n      }, () => this.handleQuestions());\n    }\n  }\n\n  handleQuestions = () => {\n    const { answers } = this.state;\n    const random = this.shuffleAnswers(answers);\n    this.setState({\n      answers: random,\n      loading: false,\n    });\n  }\n\n  // Função para ramdomizar o array de respostas baseado no algoritimo de Fisher–Yates shuffle\n  // https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array\n  shuffleAnswers = (array) => {\n    let currentIndex = array.length; let\n      randomIndex;\n    // While there remain elements to shuffle...\n    while (currentIndex !== 0) {\n      // Pick a remaining element...\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex -= 1;\n      // And swap it with the current element.\n      [array[currentIndex], array[randomIndex]] = [\n        array[randomIndex], array[currentIndex]];\n    }\n    return array;\n  }\n\n  isCorrect = (answer) => {\n    const { correctAnswer, answers } = this.state;\n    const wrongAnswers = answers.filter((a) => a !== correctAnswer);\n    if (correctAnswer === answer) return 'correct-answer';\n    return (`wrong-answer-${wrongAnswers.indexOf(answer)}`);\n  }\n\n  scoreCalculation = (answer, timer, difficulty) => {\n    const { correctAnswer } = this.state;\n    const { score, newScore, countCorrectAnswers, assertions } = this.props;\n    let difficultyValue = 0;\n    const UM = 1;\n    const DOIS = 2;\n    const TRES = 3;\n    const DEZ = 10;\n    if (difficulty === 'hard') {\n      difficultyValue = TRES;\n    }\n    if (difficulty === 'medium') {\n      difficultyValue = DOIS;\n    }\n    if (difficulty === 'easy') {\n      difficultyValue = UM;\n    }\n    if (correctAnswer === answer) {\n      newScore(score + DEZ + (difficultyValue * timer));\n      countCorrectAnswers(assertions + 1);\n      this.setState({\n        win: true,\n      });\n    } else {\n      this.setState({\n        loose: true,\n      });\n    }\n  };\n\n  errou = () => true\n\n  handleClick = (selected) => {\n    const { timer, results, currentQuestion, setAnswer } = this.props;\n    const level = results[currentQuestion].difficulty;\n    this.setState({\n      color: true,\n    });\n    this.scoreCalculation(selected, timer, level);\n    this.setState({\n      questionAnswered: true,\n    });\n    setAnswer();\n  }\n\n  isActive = (answer) => {\n    const { color, correctAnswer } = this.state;\n    if (color === true) {\n      if (correctAnswer === answer) return 'correct-answer';\n      return 'wrong-answer';\n    }\n  }\n\n  verifyTimer = () => {\n    const { questionAnswered } = this.state;\n    const { timer } = this.props;\n    /* if (timer === 0) {\n      setAnswer();\n    } */\n    if (timer === 0 || questionAnswered === true) {\n      return true;\n    }\n  }\n\n  render() {\n    const { results, currentQuestion, timer } = this.props;\n    const { loading, answers, questionAnswered, win, loose } = this.state;\n    return (\n      <div>\n        {loading === true\n          ? <Loading />\n          : (\n            <>\n              <div\n                className={ `${styles['question-container']} \n              col-10 m-auto mb-3` }\n              >\n                {win === true ? <audio src=\"https://www.myinstants.com/media/sounds/barabannn.mp3\" autoPlay={true} /> : ''}\n                {loose === true ? <audio src=\"https://www.myinstants.com/media/sounds/vinheta-faustao-errou-rede-globo.mp3\" autoPlay={true} /> : ''\n                // https://www.myinstants.com/media/sounds/vinheta-faustao-errou-rede-globo.mp3\n                // https://www.myinstants.com/media/sounds/tmp61fq4oi1.mp3\n                }\n\n                <span\n                  data-testid=\"question-category\"\n                >\n                  {results[currentQuestion].category}\n                </span>\n                <h2\n                  data-testid=\"question-text\"\n                  className=\"m-auto\"\n                >\n                  {he.decode(results[currentQuestion].question)}\n                </h2>\n                <div className={ `${styles['next-question-container']} col-lg-6 m-auto` }>\n                  { questionAnswered && (currentQuestion < results.length - 1\n                    ? <NextButton nextQuestion={ this.setNextQuestion } />\n                    : <Link to=\"/feedback\"><NextButton /></Link>) }\n                  { timer === 0 && (currentQuestion < results.length - 1\n                    ? <NextButton nextQuestion={ this.setNextQuestion } />\n                    : <Link to=\"/feedback\"><NextButton /></Link>) }\n                </div>\n              </div>\n              <div\n                data-testid=\"answer-options\"\n                className={ `${styles['answers-container']} \n                col-11 m-auto row mb-3` }\n              >\n                {answers.map((answer, index) => (\n                  <button\n                    type=\"button\"\n                    key={ index }\n                    data-testid={ this.isCorrect(answer) }\n                    className={\n                      `${styles['answer-text']} ${this.isActive(answer)} col-lg-5`\n                    }\n                    onClick={ () => this.handleClick(answer) }\n                    disabled={ this.verifyTimer() }\n                  >\n                    {he.decode(answer)}\n                  </button>))}\n              </div>\n            </>\n          )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  results: state.game.results,\n  currentQuestion: state.game.currentQuestion,\n  timer: state.game.timer,\n  score: state.player.score,\n  assertions: state.player.assertions,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  newScore: (score) => dispatch(addScore(score)),\n  btnNextQuestion: (question) => dispatch(nextQuestion(question)),\n  countCorrectAnswers: (answer) => dispatch(addQtdCorrectAnswers(answer)),\n  setAnswer: () => dispatch(answerQuestion()),\n});\n\nQuestion.propTypes = {\n  history: PropTypes.objectOf(PropTypes.any),\n  results: PropTypes.arrayOf(PropTypes.any),\n  currentQuestion: PropTypes.number,\n}.isRequired;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);\n"]},"metadata":{},"sourceType":"module"}